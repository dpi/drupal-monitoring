<?php
/**
 * @file
 * Contains \MonitoringTestBase.
 */

/**
 * Base class for all monitoring tests.
 */
abstract class MonitoringTestBase extends DrupalWebTestCase {

  /**
   * Use testing profile to speed up tests.
   *
   * @var string
   */
  protected $profile = 'testing';

  /**
   * {@inheritdoc}
   */
  function setUp() {
    $modules = func_get_args();
    if (isset($modules[0]) && is_array($modules[0])) {
      $modules = $modules[0];
    }
    $modules = array_merge(array('monitoring', 'monitoring_test'), $modules);
    parent::setUp($modules);
  }

  /**
   * Executes a sensor and returns the result.
   *
   * @param string $sensor_name
   *   Name of the sensor to execute.
   *
   * @return \Drupal\monitoring\Result\SensorResultInterface
   *   The sensor result.
   */
  protected function runSensor($sensor_name) {
    // Make sure the sensor is enabled.
    monitoring_sensor_enable($sensor_name);
    return monitoring_sensor_run($sensor_name, TRUE);
  }

}
